<h2>{{ translate("txt-contact-details") }}</h2>

<dl class="dl-horizontal">
    <dt>{{ translate("txt-first-name") }}</dt>
    <dd>{{ contact.firstName }}</dd>
    <dt>{{ translate("txt-last-name") }}</dt>
    <dd>{{ contact.lastName }} {% if contact.middleName %}({{ contact.middleName }}){% endif %}</dd>
    <dt>{{ translate("txt-gender") }}</dt>
    <dd>{{ contact.gender.name }} ({{ contact.gender }})</dd>
    {% if contact.title.name %}
        <dt>{{ translate("txt-title") }}</dt>
        <dd>{{ contact.title }} ({{ contactService.parseAttention(contact) }})</dd>
    {% endif %}
    <dt>{{ translate("txt-primary-email") }}</dt>
    <dd>{{ contact.email }} <a href="mailto:{{ contact.email }}"><i
                    class="fa fa-envelope-o"></i></a></dd>


    {% for email in contact.emailAddress if email.email != contact.email %}
        {% if loop.first %}
            <dt>{{ translate("txt-alternative-email") }}</dt>
        {% endif %}
        <dd>{{ email.email }} <a href="mailto:{{ email.email }}"><i
                        class="fa fa-envelope-o"></i></a></dd>
    {% endfor %}

    <dt>{{ translate("txt-organisation") }}</dt>
    {% if contactService.hasOrganisation(contact) %}
        <dd>{{ organisationLink(
                contact.contactOrganisation.organisation,'view-admin', 'name',contact.contactOrganisation.branch
            ) }} ({{ contact.contactOrganisation.organisation.type }}),
            {{ countryLink(contact.contactOrganisation.organisation.country,'view-admin','name') }}</dd>
    {% else %}
        <dd>{{ translate("txt-no-organisation-provided") }}</dd>
    {% endif %}

    <dt>{{ translate("txt-profile-visibility") }}</dt>
    {% if contact.profile.visible is not null %}
        <dd>{{ translate(contact.profile.visible(true)) }}</dd>
    {% else %}
        <dd>{{ translate("txt-no-visibililty-defined") }}</dd>
    {% endif %}
    {% if contact.profile.description %}
        <dt>{{ translate("txt-expertise") }}</dt>
        <dd>{{ contact.profile.description|nl2br }}</dd>
    {% endif %}

    <dt>{{ translate("txt-department") }}</dt>
    <dd>{{ contact.department|default(translate("txt-unknown")) }}</dd>
    <dt>{{ translate("txt-position") }}</dt>
    <dd>{{ contact.position|default(translate("txt-unknown")) }}</dd>
    <dt>{{ translate("txt-access") }}</dt>
    {% for access in contact.access %}
        <dd>{{ accessLink(access,'view','name') }} {% if not access.selection.isEmpty() %}*{% endif %}</dd>
    {% else %}
        <dd>{{ translate("txt-no-access-defined") }}</dd>
    {% endfor %}
</dl>

<h3>{{ translate("txt-notes") }}</h3>
{% if contact.note.count() > 0 %}
    <table class="table table-hover table-striped table-condensed table-sm">
        <thead>
        <tr>
            <th>{{ translate("txt-note-id") }}</th>
            <th>{{ translate("txt-note-type") }}</th>
            <th>{{ translate("txt-note-content") }}</th>
        </tr>
        </thead>
        <tbody>
        {% for note in contact.note %}
            <tr>
                <td>{{ note.id }} {{ noteLink(note,'edit','icon') }}</td>
                <td>{{ note.source }}</td>
                <td>{{ note.note }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    {{ ztbalert().info(translate("txt-no-notes-available-for-this-contact"))|raw }}
{% endif %}

{{ noteLink(null,'new','button', contact) }}

<hr>
{{ contactLink(contact,'edit-admin','button') }}
{{ contactLink(contact,'permit','button') }}
{{ contactLink(contact,'impersonate','button') }}