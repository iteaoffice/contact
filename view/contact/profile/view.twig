{% do headTitle().append(translate("txt-profile")) %}
{% do headTitle().append(contact.parseFullName()) %}

<h1 class="home">{{ translate("txt-hello-%s")|format(zfcUserDisplayName()) }}</h1>

<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item active"><a class="nav-link active" role="tab" href="#profile"
                                   data-toggle="tab">{{ translate("txt-profile")|capitalize }}</a></li>
    <li class="nav-item"><a class="nav-link" href="#organisation"
                            data-toggle="tab">{{ translate("txt-organisation")|capitalize }} {% if not contact.contactOrganisation %}
                <i
                        class="error fa fa-exclamation-triangle" aria-hidden="true"></i>
            {% endif %}</a></li>
    <li class="nav-item"><a class="nav-link" role="tab" href="#event"
                            data-toggle="tab">{{ translate("txt-events")|capitalize }}</a></li>
    <li class="nav-item"><a class="nav-link" role="tab" href="#updates"
                            data-toggle="tab">{{ translate("txt-updates")|capitalize }}</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" role="tabpanel" id="profile">
        <h2>{{ translate("txt-personal-profile") }}</h2>
        <dl class="dl-horizontal">
            <dt>{{ translate("txt-name") }}</dt>
            <dd>{{ contact.parseFullName() }} ({{ contact.id }})</dd>
            <dt>{{ translate("txt-email") }}</dt>
            <dd>{{ contact.email }}</dd>
            <dt>{{ translate("txt-direct-phone") }}</dt>
            <dd>{{ contactService.getDirectPhone(contact) }}</dd>
            <dt>{{ translate("txt-mobile-phone") }}</dt>
            <dd>{{ contactService.getMobilePhone(contact) }}</dd>
            {% if  contactService.getMailAddress(contact) %}
                <dt>{{ translate("txt-postal-address") }}</dt>
                <dd>{{ contactService.getMailAddress(contact).address }}</dd>
                <dd>{{ contactService.getMailAddress(contact).zipCode }} {{ contactService.getMailAddress(contact).city }}</dd>
                <dd>{{ contactService.getMailAddress(contact).country|upper }}</dd>
            {% endif %}
            <dt>{{ translate("txt-profile-visibility") }}</dt>
            {% if contact.profile.visible is not null %}
                <dd>{{ translate(contact.profile.visible(true)) }}</dd>
            {% else %}
                <dd>{{ translate("txt-no-visibililty-defined") }}</dd>
            {% endif %}
            <dt>{{ translate("txt-expertise") }}</dt>
            <dd>{{ contact.profile.description|nl2br }}</dd>
        </dl>

        {{ contactLink(contact,'edit-profile', 'button') }}
        {{ contactLink(contact,'change-password', 'button') }}

        {% if hasNda %}
            {% if not isAllowed('route/community/program/nda/submit','submit') %}
                <button class="btn btn-primary"
                        disabled><i
                            class="fa fa-upload"></i> {{ translate("txt-upload-of-nda-not-possible-without-organisation") }}
                </button>
            {% else %}
                {{ ndaLink(null,'submit', 'button') }}
            {% endif %}

        {% endif %}
    </div>


    <div class="tab-pane" role="tabpanel" id="organisation">
        <h2>{{ translate("txt-organisation") }}</h2>
        {% if contact.contactOrganisation %}
            <dl class="dl-horizontal">
                <dt>{{ translate("txt-organisation") }}</dt>
                <dd>{{ contactService.parseOrganisation(contact) }}</dd>
                <dt>{{ translate("txt-organisation-type") }}</dt>
                <dd>{{ contact.contactOrganisation.organisation.type.description }}</dd>
                <dt>{{ translate("txt-country") }}</dt>
                <dd>{{ contact.contactOrganisation.organisation.country }}</dd>
                {% if contact.department %}
                    <dt>{{ translate("txt-department") }}</dt>
                    <dd>{{ contact.department }}</dd>
                {% endif %}
                {% if contact.position %}
                    <dt>{{ translate("txt-position") }}</dt>
                    <dd>{{ contact.position }}</dd>
                {% endif %}
                {% if contact.contactOrganisation.organisation.description|length > 0 %}
                    <dt>{{ translate("txt-general-description") }}</dt>
                    <dd>{{ contact.contactOrganisation.organisation.description|raw }}</dd>
                {% endif %}
            </dl>
        {% else %}
            {{ ztbalert().danger(translate("txt-no-organisation-found-complete-your-profile-to-participate-in-projects"))|raw }}
        {% endif %}
        {{ contactLink(contact,'edit-profile', 'button') }}
    </div>

    <div class="tab-pane" role="tabpanel" id="event">
        <h2>{{ translate("txt-events") }}</h2>

        {% include 'event/partial/list/meeting-list' %}
    </div>


    <div class="tab-pane" role="tabpanel" id="updates">
        <h2>{{ translate("txt-updates") }}</h2>

        <p>{{ translate("txt-updates-explanation") }}</p>

        <div ng-app="community">
            {% for optIn in optIns %}
                {% include 'contact/partial/optin-button' with {'optIn': optIn} %}
                <br>
            {% endfor %}
        </div>

    </div>
</div>